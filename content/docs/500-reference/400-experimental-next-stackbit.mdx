---
title: experimental-next-stackbit
excerpt: Hook the Stackbit development server into Next.js and Contentlayer.
label: Experimental
---

This package is used in `next.config.js` in conjunction with [`next-contentlayer`](/docs/reference/next-contentlayer) to hook the [`contentlayer dev`](/docs/reference/cli#dev) and [`stackbit dev`](/reference/stackbit-cli#dev) commands into the Next.js development server (`next dev`).

## `withStackbit`

Next.js configuration, along with the [`withContentlayer` hook](/docs/reference/next-contentlayer#withcontentlayer) should be wrapped in the `withStackbit` method.

```js
// next.config.js

const { withContentlayer } = require('next-contentlayer')
const { withStackbit } = require('experimental-next-stackbit')

module.exports = withStackbit(
  withContentlayer({
    reactStrictMode: true,
  }),
)
```

This function will automatically detect if you are in production (when `process.env.NODE_ENV` is `production`) and skip running the Stackbit development server.
